@using System.Activities.Expressions
@using System.Web.UI.WebControls
@model BodyCompositionCalculator.Models.ViewModels.CheckInFormViewModel


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!DOCTYPE html>
<head>
    <script src="https://kit.fontawesome.com/7ec14fb925.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    @Styles.Render("~/Content/datepicker")
    @Styles.Render("~/Content/my-styles/profile-edit-style.css")
</head>


<html lang="en">

<body>

    <h2>@Model.PageTitlePrefix Check-In</h2>
    @Html.ValidationSummary()
    @*//TODO set this as today by default*@

    @using (Html.BeginForm("AddNewProgressLog", "Home"))
    {
        <label>Date</label>
        <div class="form-group ">
            <div id="date" , class="input-group date datepicker">
                @Html.TextBoxFor(model => model.UserProgressLog.Date, "{0: dd MMM yyyy}", new { @class = "form-control col-2" })
                <div class="input-group-append input-group-addon">
                    <span class="input-group-text">
                        <span class="fa fa-calendar"></span>
                    </span>
                </div>
            </div>
            @Html.ValidationMessageFor(m => m.UserProgressLog.Date)
        </div>


        <label>Weight</label>
        <div class="form-group">
            <div class="form-group form-inline">
                @Html.TextBoxFor(m => m.WeightInputA, new { @class = "form-control col-1", @id = "weightInputA", @min = "0" })
                @Html.TextBoxFor(m => m.WeightInputB, new { @class = "form-control col-1", @id = "weightInputB", @min = "0", @max = "13" })
                <p class="form-control" id="weightUnit">@Model.WeightUnit</p>

                TODO - format the KG box the same as the calendar one or vice versa?
            </div>

            @Html.ValidationMessageFor(m => m.UserProgressLog.WeightInKg)
        </div>

        <label>Body Fat</label>
        <div class="form-group form-inline">
            @Html.TextBoxFor(m => m.UserProgressLog.BodyFat, new { @class = "form-control col-2", @min = "0", @max = "100" })
            <p class="form-control">%</p>
        </div>
        @Html.ValidationMessageFor(m => m.UserProgressLog.BodyFat)


        @*<label>Body Fat</label>
            <div class="form-group input-group">
                @Html.TextBoxFor(m => m.UserProgressLog.BodyFat, new { @class = "form-control", @min = "0" })
                <div class="input-group-append">
                    <span class="input-group-text">
                        <i class="fas fa-percentage"></i>
                    </span>
                </div>
                @Html.ValidationMessageFor(m => m.UserProgressLog.BodyFat)
            </div>*@



        @Html.HiddenFor(m => m.UserProgressLog.Id)
        @Html.HiddenFor(m => m.UserProgressLog.UserProfileId)
        @Html.HiddenFor(m => m.UserProgressLog.UserProfile)
        @Html.HiddenFor(m => m.UserProgressLog.Photo)
        @Html.HiddenFor(m => m.RedirectionPage)
        @Html.AntiForgeryToken()
        ;


        <button type="submit" class="btn btn-primary">Save</button>

    }

    <p class="subtext">Weight unit can be changed in the profile screen</p>


    <script>


        $(document).ready(function () {


            var weightUnit = $('#weightUnit').text();

            if (weightUnit == 'kg' || weightUnit == 'lbs') {
                $('#weightInputB').hide();
                $('#weightInputA').removeClass("col-1");
                $('#weightInputA').addClass("col-2");
            }


            $('#date.datepicker').datepicker({
                format: 'dd M yyyy',
                todayBtn: true,
                autoclose: true,
                todayHighlight: true
            });

        });

    </script>
    @Scripts.Render("~/bundles/jqueryval")

</body>

</html>

